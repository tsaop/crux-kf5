# Description: Part of KDE Plasma
# URL: https://www.kde.org
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: dbus freetype glib harfbuzz kactivities karchive kauth kcmutils kcodecs kcompletion kconfig kconfigwidgets kcoreaddons kcrash kdbusaddons kdeclarative kdesu kglobalaccel kguiaddons ki18n kiconthemes kio kitemviews kjobwidgets kpackage kpty kservice kwidgetsaddons kwindowsystem kxmlgui libglvnd libpng plasma-workspace qt5 solid xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxfixes xorg-xcb-util-keysyms

name=kde-cli-tools
version=5.24.2
release=1
source=(http://download.kde.org/stable/plasma/$version/$name-$version.tar.xz)

build() {
	cd $name-$version

	cmake \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DSYSCONF_INSTALL_DIR=/etc \
	-DLIB_INSTALL_DIR=/usr/lib \
	-DLIBEXEC_INSTALL_DIR=lib \
	-DBUILD_TESTING=OFF \
	-DKDE_INSTALL_USE_QT_SYS_PATHS=ON \
	-DCMAKE_BUILD_TYPE=Release \
	-Wno-dev

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share/locale
	rm -rf $PKG/usr/share/doc
	( cd $PKG/usr/share/man
	  find . ! -path . -type d | grep -v "man[0-9]" | xargs rm -rf
	)	
}
