# Description: A tool for static C/C++ code analysis
# URL: http://cppcheck.sourceforge.net/
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: libxml2 tinyxml2

name=cppcheck
version=2.11
release=1
source=(https://github.com/danmar/$name/archive/$version/$name-$version.tar.gz
	version-fix.patch)

build() {
	cd $name-$version

	patch -Np1 -i $SRC/version-fix.patch

	cmake -Bbuild \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DUSE_BUNDLED_TINYXML2=OFF \
		-DBUILD_SHARED_LIBS=ON

	cmake --build build
	DESTDIR=$PKG cmake --install build
}
