# Description: Kid3 is an audio tag editor supporting MP3, Ogg/Vorbis, FLAC, MPC, MP4/AAC, MP2, Opus, Speex, TrueAudio, WavPack, WMA, WAV and AIFF files 
# URL: https://kid3.kde.org/
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: chromaprint flac id3lib kio taglib

name=kid3
version=3.9.4
release=2
source=(https://download.kde.org/stable/$name/$version/$name-$version.tar.xz
	3ed2e5f7.patch
	98524900.patch
	taglib-2.patch)

build() {
	cd $name-$version
	patch -Np1 -i $SRC/3ed2e5f7.patch
	patch -Np1 -i $SRC/98524900.patch
	patch -Np1 -i $SRC/taglib-2.patch

	cmake -Bbuild \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release

	cmake --build build
	DESTDIR=$PKG cmake --install build

	rm -rf $PKG/usr/share/kid3/translations
	rm -rf $PKG/usr/share/doc

	( cd $PKG/usr/share/man
	  find . ! -path . -type d | grep -v "man[0-9]" | xargs rm -rf
	)
}
